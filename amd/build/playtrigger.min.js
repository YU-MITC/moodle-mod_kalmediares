define(["jquery"],function(a){return{init:function(b,c){function d(){var a,b=navigator.userAgent;return a=b.match(/iPhone|iPad|iPod/)?"iOS":b.match(/Android|android/)?"Android":b.match(/Linux|linux/)?"Linux":b.match(/Win(dows)/)?"Windows":b.match(/Mac|PPC/)?"Mac OS":b.match(/CrOS/)?"Chrome OS":"Other"}function e(){var d,e=new FormData;e.append("id",c);var f={type:"POST",data:e,cache:!1,contentType:!1,scriptCharset:"utf-8",processData:!1,async:!0,dataType:"xml"};return b=b+"?id="+c,a.ajax(b,f).done(function(a){null===a&&(d=!1),d=!0}).fail(function(a){window.console.dir(a),d=!1}),d}function f(){m.off("play","**"),n===!1&&(n=!0,e())}function g(){m.off("playing","**"),n===!1&&(n=!0,e())}function h(){m.off("timeupdate","**"),n===!1&&(n=!0,e())}function i(){m.off("seeked","**"),n===!1&&(n=!0,e())}function j(){m.off("pause","**"),n===!1&&(n=!0,e())}function k(){m.off("ended","**"),n===!1&&(n=!0,e())}function l(){m.off("ratechange","**"),n===!1&&(n=!0,e())}var m,n=!1;if(null!==b&&""!==b){var o=!1,p=d();"iOS"!=p&&"Android"!=p&&"Chrome OS"!=p||(o=!0),a(window).on("load",function(){m=a("video"),null!==m&&m.length>=1&&(m.on("play",function(){f()}),m.on("playing",function(){g()}),o===!0&&(m.on("timeupdate",function(){h()}),m.on("seeked",function(){i()}),m.on("pause",function(){j()}),m.on("ended",function(){k()}),m.on("ratechange",function(){l()})))}),a("iframe").on("load",function(){m=a("iframe").eq(0).contents().find("video"),null!==m&&m.length>=1&&(m.on("play",function(){f()}),m.on("playing",function(){g()}),o===!0&&(m.on("timeupdate",function(){h()}),m.on("seeked",function(){i()}),m.on("pause",function(){j()}),m.on("ended",function(){k()}),m.on("ratechange",function(){l()})))})}}}});