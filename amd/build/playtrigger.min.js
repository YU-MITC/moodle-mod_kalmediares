define ("mod_kalmediares/playtrigger",["jquery"],function(a){return{init:function init(b,c){var o,p,q=!1,r=!1,s=null;function d(){var a,b=navigator.userAgent;if(b.match(/iPhone|iPad|iPod|IPHONE|IPAD|IPOD|iphone|ipad|ipod/)){a="iOS"}else if(b.match(/Android|android|ANDROID/)){a="Android"}else if(b.match(/Linux|linux|LINUX|ubuntu|Ubuntu|UBUNTU/)){a="Linux"}else if(b.match(/Win(dows)|WIN(DOWS)/)){a="Windows"}else if(b.match(/Mac|PPC/)){a="Mac OS"}else if(b.match(/CrOS/)){a="Chrome OS"}else if(b.match(/mobile|Mobile|MOBILE/)){a="Mobile"}else{a="Other"}return a}function e(){var d=new FormData,e;d.append("id",c);b=b+"?id="+c;a.ajax(b,{type:"POST",data:d,cache:!1,contentType:!1,scriptCharset:"utf-8",processData:!1,async:!0,dataType:"xml"}).done(function(a){if(null===a){e=!1}e=!0}).fail(function(a){window.console.dir(a);e=!1});return e}function f(){o.off("play","**");if(!1===q){q=!0;e()}}function g(){o.off("playing","**");if(!1===q){q=!0;e()}}function h(){o.off("timeupdate","**");if(!1===q){q=!0;e()}}function i(){o.off("seeked","**");if(!1===q){q=!0;e()}}function j(){o.off("pause","**");if(!1===q){q=!0;e()}}function k(){o.off("ended","**");if(!1===q){q=!0;e()}}function l(){o.off("ratechange","**");if(!1===q){q=!0;e()}}function m(a){var b=!1,c=d();if("iOS"==c||"Android"==c||"Chrome OS"==c||"Mobile"==c){b=!0}if(null!==a&&1<=a.length){a.on("play",function(){f()});a.on("playing",function(){g()});if(!0===b){a.on("timeupdate",function(){h()});a.on("seeked",function(){i()});a.on("pause",function(){j()});a.on("ended",function(){k()});a.on("ratechange",function(){l()})}r=!0}}function n(){if(!1===r&&!1===q){o=a("video");if(null!==o&&1<=o.length){m(o)}else{p=a("iframe");if(null!==p&&1<=p.length){o=p.eq(0).contents().find("video");if(null!==o&&1<=o.length){m(o)}}}}if(!0===r&&null!==s){clearInterval(s)}}if(null!==b&&""!==b){a(document).ready(function(){if(!1===q&&!1===r){n()}if(null===s){s=setInterval(n,1e3)}});a("iframe").on("load",function(){if(!1===q&&!1===r){n()}if(null===s){s=setInterval(n,1e3)}});a(window).on("load",function(){if(!1===q&&!1===r){n()}if(null===s){s=setInterval(n,1e3)}});a(window).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(){if(!1===q&&!1===r){n()}if(null===s){s=setInterval(n,1e3)}})}}}});
//# sourceMappingURL=playtrigger.min.js.map
