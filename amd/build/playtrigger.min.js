define(["jquery"],function(a){return{init:function(b,c){function d(){var a,b=navigator.userAgent;return a=b.match(/iPhone|iPad|iPod|IPHONE|IPAD|IPOD|iphone|ipad|ipod/)?"iOS":b.match(/Android|android|ANDROID/)?"Android":b.match(/Linux|linux|LINUX|ubuntu|Ubuntu|UBUNTU/)?"Linux":b.match(/Win(dows)|WIN(DOWS)/)?"Windows":b.match(/Mac|PPC/)?"Mac OS":b.match(/CrOS/)?"Chrome OS":b.match(/mobile|Mobile|MOBILE/)?"Mobile":"Other"}function e(){var d,e=new FormData;e.append("id",c);var f={type:"POST",data:e,cache:!1,contentType:!1,scriptCharset:"utf-8",processData:!1,async:!0,dataType:"xml"};return b=b+"?id="+c,a.ajax(b,f).done(function(a){null===a&&(d=!1),d=!0}).fail(function(a){window.console.dir(a),d=!1}),d}function f(){n.off("play","**"),o===!1&&(o=!0,e())}function g(){n.off("playing","**"),o===!1&&(o=!0,e())}function h(){n.off("timeupdate","**"),o===!1&&(o=!0,e())}function i(){n.off("seeked","**"),o===!1&&(o=!0,e())}function j(){n.off("pause","**"),o===!1&&(o=!0,e())}function k(){n.off("ended","**"),o===!1&&(o=!0,e())}function l(){n.off("ratechange","**"),o===!1&&(o=!0,e())}function m(a){var b=!1,c=d();("iOS"==c||"Android"==c||"Chrome OS"==c||"Mobile"==c)&&(b=!0),null!==a&&a.length>=1&&(a.on("play",function(){f()}),a.on("playing",function(){g()}),b===!0&&(a.on("timeupdate",function(){h()}),a.on("seeked",function(){i()}),a.on("pause",function(){j()}),a.on("ended",function(){k()}),a.on("ratechange",function(){l()})))}var n,o=!1,p="webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange";null!==b&&""!==b&&(a(window).on("load",function(){o===!1&&(n=a("video"),null!==n&&n.length>=1&&m(n))}),a("iframe").on("load",function(){o===!1&&(n=a("iframe").eq(0).contents().find("video"),null!==n&&n.length>=1&&m(n))}),a(window).on(p,function(){o===!1&&(n=a("video"),null!==n&&n.length>=1?m(n):(n=a("iframe").eq(0).contents().find("video"),null!==n&&n.length>=1&&m(n)))}))}}});