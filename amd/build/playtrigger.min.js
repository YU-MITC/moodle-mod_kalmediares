define ("mod_kalmediares/playtrigger",["jquery"],function(a){return{init:function init(b,c){var n,o=!1;function d(){var a,b=navigator.userAgent;if(b.match(/iPhone|iPad|iPod/)){a="iOS"}else if(b.match(/Android|android/)){a="Android"}else if(b.match(/Linux|linux/)){a="Linux"}else if(b.match(/Win(dows)/)){a="Windows"}else if(b.match(/Mac|PPC/)){a="Mac OS"}else if(b.match(/CrOS/)){a="Chrome OS"}else if(b.match(/mobile|Mobile|MOBILE/)){a="Mobile"}else{a="Other"}return a}function e(){var d=new FormData,e;d.append("id",c);b=b+"?id="+c;a.ajax(b,{type:"POST",data:d,cache:!1,contentType:!1,scriptCharset:"utf-8",processData:!1,async:!0,dataType:"xml"}).done(function(a){if(null===a){e=!1}e=!0}).fail(function(a){window.console.dir(a);e=!1});return e}function f(){n.off("play","**");if(!1===o){o=!0;e()}}function g(){n.off("playing","**");if(!1===o){o=!0;e()}}function h(){n.off("timeupdate","**");if(!1===o){o=!0;e()}}function i(){n.off("seeked","**");if(!1===o){o=!0;e()}}function j(){n.off("pause","**");if(!1===o){o=!0;e()}}function k(){n.off("ended","**");if(!1===o){o=!0;e()}}function l(){n.off("ratechange","**");if(!1===o){o=!0;e()}}function m(a){var b=!1,c=d();if("iOS"==c||"Android"==c||"Chrome OS"==c||"Mobile"==c){b=!0}if(null!==a&&1<=a.length){a.on("play",function(){f()});a.on("playing",function(){g()});if(!0==b){a.on("timeupdate",function(){h()});a.on("seeked",function(){i()});a.on("pause",function(){j()});a.on("ended",function(){k()});a.on("ratechange",function(){l()})}}}if(null!==b&&""!==b){a(window).on("load",function(){if(!1===o){n=a("video");if(null!==n&&1<=n.length){m(n)}}});a("iframe").on("load",function(){if(!1===o){n=a("iframe").eq(0).contents().find("video");if(null!==n&&1<=n.length){m(n)}}});a(window).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(){if(!1===o){n=a("video");if(null!==n&&1<=n.length){m(n)}else{n=a("iframe").eq(0).contents().find("video");if(null!==n&&1<=n.length){m(n)}}}})}}}});
//# sourceMappingURL=playtrigger.min.js.map
